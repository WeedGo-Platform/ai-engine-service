# ============================================================================
# BETA ENVIRONMENT - TEMPLATE FILE
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file to .env.beta
# 2. Replace all placeholder values with real credentials
# 3. NEVER commit .env.beta to git
#
# Deployed to: Google Cloud Run / Render
# URL: https://weedgo-beta-backend-*.run.app
# Frontends: https://weedgo-beta-*.netlify.app
# ============================================================================

ENVIRONMENT=beta

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# **REQUIRED**: Set these to your Beta database credentials
# Use a dedicated beta database instance (separate from UAT and Production)
# Neon, Railway, or other managed PostgreSQL
DB_HOST=GET_FROM_DATABASE_PROVIDER
DB_NAME=GET_FROM_DATABASE_PROVIDER
DB_USER=GET_FROM_DATABASE_PROVIDER
DB_PASSWORD=GET_FROM_DATABASE_PROVIDER
DB_PORT=5432
DATABASE_URL=postgresql://DB_USER:DB_PASSWORD@DB_HOST:5432/DB_NAME?sslmode=require

# ============================================================================
# API SERVICE (Cloud Run / Render)
# ============================================================================
# Cloud platform sets PORT automatically (usually 8080)
API_HOST=0.0.0.0
API_PORT=8080
V5_PORT=8080
V5_HOST=0.0.0.0
# Cloud platform will provide the actual URL
# API_BASE_URL will be set by platform environment

# ============================================================================
# CORS CONFIGURATION (Environment-Driven)
# ============================================================================
# **REQUIRED**: List all Beta frontend origins
# Semicolon-separated for Cloud Run YAML compatibility
CORS_ALLOWED_ORIGINS=https://weedgo-beta-admin.netlify.app;https://weedgo-beta-commerce.netlify.app
# Optional: Regex pattern for Netlify preview deployments
CORS_ORIGIN_REGEX=https://.*\\.netlify\\.app

# ============================================================================
# SECURITY
# ============================================================================
# **REQUIRED**: Set unique secrets for Beta (different from UAT and Production)
# Generate with: openssl rand -hex 32
SECRET_KEY=GENERATE_WITH_OPENSSL_RAND_HEX_32
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=GENERATE_WITH_PYTHON_SECRETS_TOKEN_URLSAFE_32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# REDIS CACHE
# ============================================================================
# **REQUIRED**: Upstash Redis for Beta (or dedicated Redis instance)
# Get from: https://console.upstash.com/redis
UPSTASH_REDIS_REST_URL=GET_FROM_UPSTASH_DASHBOARD
UPSTASH_REDIS_REST_TOKEN=GET_FROM_UPSTASH_DASHBOARD

# ============================================================================
# THIRD-PARTY APIs
# ============================================================================
# **REQUIRED**: Use dedicated API keys for Beta (separate from dev/test)
# Mapbox Geocoding API
# Get from: https://account.mapbox.com/access-tokens/
MAPBOX_API_KEY=GET_FROM_MAPBOX_DASHBOARD

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# CLOUD-FIRST MODE: Use cloud providers (no local models required)
USE_CLOUD_INFERENCE=true

# LLM Router API Keys
# OpenRouter (DeepSeek R1 - Reasoning Model)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=GET_FROM_OPENROUTER_DASHBOARD

# Groq (Llama 3.3 70B - Ultra-Fast)
# Get from: https://console.groq.com/keys
GROQ_API_KEY=GET_FROM_GROQ_DASHBOARD

# ============================================================================
# PAYMENT (Stripe Test Keys)
# ============================================================================
# **IMPORTANT**: Use Stripe test keys for Beta, live keys only in Production
# Get from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=GET_FROM_STRIPE_DASHBOARD_TEST_MODE
STRIPE_PUBLISHABLE_KEY=GET_FROM_STRIPE_DASHBOARD_TEST_MODE
STRIPE_WEBHOOK_SECRET=GET_FROM_STRIPE_WEBHOOKS_AFTER_SETUP

# ============================================================================
# COMMUNICATION - OTP/SMS/Email
# ============================================================================
# **REQUIRED**: Use dedicated Twilio/SendGrid for Beta

# Twilio Configuration (for SMS OTP)
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=GET_FROM_TWILIO_DASHBOARD
TWILIO_AUTH_TOKEN=GET_FROM_TWILIO_DASHBOARD
TWILIO_PHONE_NUMBER=GET_FROM_TWILIO_DASHBOARD

# SendGrid Configuration (for Email OTP)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=GET_FROM_SENDGRID_DASHBOARD
SENDGRID_FROM_EMAIL=beta@yourdomain.com
SENDGRID_FROM_NAME=WeedGo Beta

# SMTP Configuration (Fallback)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=GET_APP_SPECIFIC_PASSWORD_FROM_GMAIL
SMTP_PASSWORD=GET_APP_SPECIFIC_PASSWORD_FROM_GMAIL
SMTP_FROM_EMAIL=beta@yourdomain.com
SMTP_FROM_NAME=WeedGo Beta

# ============================================================================
# OTP CONFIGURATION (Standard Defaults)
# ============================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3
OTP_RATE_LIMIT_MAX=5
OTP_RATE_LIMIT_WINDOW=60

# ============================================================================
# BETA FLAGS
# ============================================================================
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# SETUP INSTRUCTIONS FOR BETA
# ============================================================================
#
# 1. Copy this file:
#    cp .env.beta.example .env.beta
#
# 2. Get credentials from each service:
#    - Database: Neon, Railway, or your provider
#    - Upstash Redis: https://console.upstash.com/redis
#    - OpenRouter: https://openrouter.ai/keys
#    - Groq: https://console.groq.com/keys
#    - Mapbox: https://account.mapbox.com/access-tokens/
#    - Twilio: https://console.twilio.com/
#    - SendGrid: https://app.sendgrid.com/settings/api_keys
#    - Stripe: https://dashboard.stripe.com/test/apikeys
#
# 3. Generate secure secrets:
#    SECRET_KEY: openssl rand -hex 32
#    JWT_SECRET_KEY: python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 4. Replace all GET_FROM_* and GENERATE_WITH_* placeholders
#
# 5. NEVER commit .env.beta to git!
#    It's already in .gitignore
#
# 6. For Cloud Run/Render deployment:
#    - Add secrets to platform secret manager
#    - Reference secrets in deployment config
#    - Never hardcode secrets in configs
#
# ============================================================================
