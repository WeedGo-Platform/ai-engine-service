# ============================================================================
# UAT (User Acceptance Testing) ENVIRONMENT - TEMPLATE FILE
# ============================================================================
# INSTRUCTIONS:
# 1. Copy this file to .env.uat
# 2. Replace all placeholder values with real credentials
# 3. NEVER commit .env.uat to git
#
# Deployed to: Google Cloud Run / Koyeb
# URL: https://weedgo-uat-backend-*.run.app
# Frontends: https://weedgo-uat-*.pages.dev
# ============================================================================

ENVIRONMENT=uat

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# **REQUIRED**: Set these to your UAT database credentials
# Neon PostgreSQL (or your cloud database provider)
# Get from: https://console.neon.tech/app/projects
DATABASE_URL=postgresql://DB_USER:DB_PASSWORD@DB_HOST/DB_NAME?sslmode=require
DB_HOST=GET_FROM_NEON_DATABASE_DASHBOARD
DB_NAME=GET_FROM_NEON_DATABASE_DASHBOARD
DB_USER=GET_FROM_NEON_DATABASE_DASHBOARD
DB_PASSWORD=GET_FROM_NEON_DATABASE_DASHBOARD
DB_PORT=5432

# ============================================================================
# API SERVICE (Cloud Run / Koyeb)
# ============================================================================
# Cloud platform sets PORT automatically (usually 8080)
# These are fallbacks if PORT is not set
API_HOST=0.0.0.0
API_PORT=8080
V5_PORT=8080
V5_HOST=0.0.0.0
# Cloud platform will provide the actual URL via environment
# API_BASE_URL will be set by platform environment

# ============================================================================
# CORS CONFIGURATION (Environment-Driven)
# ============================================================================
# **REQUIRED**: List all UAT frontend origins
# Semicolon-separated for Cloud Run/Koyeb YAML compatibility
CORS_ALLOWED_ORIGINS=https://weedgo-uat-admin.pages.dev;https://weedgo-uat-commerce-headless.pages.dev;https://weedgo-uat-commerce-pot-palace.pages.dev;https://weedgo-uat-commerce-modern.pages.dev
# Optional: Regex pattern for Cloudflare Pages preview deployments
CORS_ORIGIN_REGEX=https://.*\\.weedgo-uat-.*\\.pages\\.dev

# ============================================================================
# SECURITY
# ============================================================================
# **REQUIRED**: Set unique secrets for UAT
# Generate with: openssl rand -hex 32
SECRET_KEY=GENERATE_WITH_OPENSSL_RAND_HEX_32
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=GENERATE_WITH_PYTHON_SECRETS_TOKEN_URLSAFE_32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# REDIS CACHE
# ============================================================================
# **REQUIRED**: Upstash Redis for UAT
# Get from: https://console.upstash.com/redis
UPSTASH_REDIS_REST_URL=GET_FROM_UPSTASH_DASHBOARD
UPSTASH_REDIS_REST_TOKEN=GET_FROM_UPSTASH_DASHBOARD

# ============================================================================
# THIRD-PARTY APIs
# ============================================================================
# **REVIEW**: Consider using separate API keys for UAT
# Mapbox Geocoding API
# Get from: https://account.mapbox.com/access-tokens/
MAPBOX_API_KEY=GET_FROM_MAPBOX_DASHBOARD

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# CLOUD-FIRST MODE: Use cloud providers (no local models required)
USE_CLOUD_INFERENCE=true

# LLM Router API Keys
# OpenRouter (DeepSeek R1 - Reasoning Model)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=GET_FROM_OPENROUTER_DASHBOARD

# Groq (Llama 3.3 70B - Ultra-Fast)
# Get from: https://console.groq.com/keys
GROQ_API_KEY=GET_FROM_GROQ_DASHBOARD

# ============================================================================
# PAYMENT (Stripe Test Keys - OK for UAT)
# ============================================================================
# Get from: https://dashboard.stripe.com/test/apikeys
# Consider using separate Stripe account for UAT
STRIPE_SECRET_KEY=GET_FROM_STRIPE_DASHBOARD_TEST_MODE
STRIPE_PUBLISHABLE_KEY=GET_FROM_STRIPE_DASHBOARD_TEST_MODE
STRIPE_WEBHOOK_SECRET=GET_FROM_STRIPE_WEBHOOKS_AFTER_SETUP

# ============================================================================
# COMMUNICATION - OTP/SMS/Email
# ============================================================================
# **REVIEW**: Consider separate Twilio/SendGrid for UAT

# Twilio Configuration (for SMS OTP)
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=GET_FROM_TWILIO_DASHBOARD
TWILIO_AUTH_TOKEN=GET_FROM_TWILIO_DASHBOARD
TWILIO_PHONE_NUMBER=GET_FROM_TWILIO_DASHBOARD

# SendGrid Configuration (for Email OTP)
# Get from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=GET_FROM_SENDGRID_DASHBOARD
SENDGRID_FROM_EMAIL=uat@yourdomain.com
SENDGRID_FROM_NAME=WeedGo UAT

# SMTP Configuration (Fallback)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=GET_APP_SPECIFIC_PASSWORD_FROM_GMAIL
SMTP_PASSWORD=GET_APP_SPECIFIC_PASSWORD_FROM_GMAIL
SMTP_FROM_EMAIL=uat@yourdomain.com
SMTP_FROM_NAME=WeedGo UAT

# ============================================================================
# OTP CONFIGURATION (Standard Defaults)
# ============================================================================
OTP_LENGTH=6
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=3
OTP_RATE_LIMIT_MAX=5
OTP_RATE_LIMIT_WINDOW=60

# ============================================================================
# UAT FLAGS
# ============================================================================
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# SETUP INSTRUCTIONS FOR UAT
# ============================================================================
#
# 1. Copy this file:
#    cp .env.uat.example .env.uat
#
# 2. Get credentials from each service:
#    - Neon Database: https://console.neon.tech/
#    - Upstash Redis: https://console.upstash.com/redis
#    - OpenRouter: https://openrouter.ai/keys
#    - Groq: https://console.groq.com/keys
#    - Mapbox: https://account.mapbox.com/access-tokens/
#    - Twilio: https://console.twilio.com/
#    - SendGrid: https://app.sendgrid.com/settings/api_keys
#    - Stripe: https://dashboard.stripe.com/test/apikeys
#
# 3. Generate secure secrets:
#    SECRET_KEY: openssl rand -hex 32
#    JWT_SECRET_KEY: python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# 4. Replace all GET_FROM_* and GENERATE_WITH_* placeholders with real values
#
# 5. NEVER commit .env.uat to git!
#    It's already in .gitignore
#
# 6. For Koyeb/Cloud Run deployment:
#    - Add secrets to platform secret manager
#    - Reference secrets in koyeb.yaml or Cloud Run config
#    - Never hardcode secrets in deployment configs
#
# ============================================================================
